---
phase: 3
plan: 2
wave: 1
depends_on: [Phase 2]
files_modified:
  - "src/matriculaup/ui/tabs/schedule_tab.py"
  - "src/matriculaup/ui/components/timetable_grid.py"
autonomous: true
must_haves:
  truths:
    - "User can click Export and save a PNG of the timetable"
  artifacts:
    - "PNG image containing grid blocks"
---

# Plan 3.2: Export to PNG

<objective>
Implement a feature allowing users to export their tentatively scheduled week into a high-quality PNG image for sharing or personal saving.
</objective>

<context>
Load for context:
- src/matriculaup/ui/components/timetable_grid.py
- src/matriculaup/ui/tabs/schedule_tab.py
</context>

<tasks>

<task type="auto">
  <name>Export Button UI</name>
  <files>src/matriculaup/ui/tabs/schedule_tab.py</files>
  <action>
    Add a QPushButton labeled "Exportar Horario a Imagen" to the top or bottom of the Schedule tab.
  </action>
  <verify>Button renders correctly on Tab 2.</verify>
  <done>Button is visible and clickable.</done>
</task>

<task type="auto">
  <name>QPixmap Rendering Logic</name>
  <files>src/matriculaup/ui/components/timetable_grid.py, src/matriculaup/ui/tabs/schedule_tab.py</files>
  <action>
    Implement an `export_to_png(filepath)` method inside the `TimetableGrid`.
    Use `self.grab()` or `QPixmap` rendering to capture the exact drawing of the week into a QPixmap.
    Connect the "Exportar" button to trigger a `QFileDialog.getSaveFileName` prompt to allow the user to select the destination, then pass that path to the grid.
  </action>
  <verify>Launch app, add a course, click export, save to Desktop, open PNG to verify.</verify>
  <done>Exported image perfectly resembles the on-screen schedule grid without UI buttons overlapping.</done>
</task>

</tasks>

<verification>
After all tasks, verify:
- [ ] Export dialog opens.
- [ ] Saving writes a valid .png binary to disk.
- [ ] Image scales correctly.
</verification>

<success_criteria>
- [ ] All tasks verified
- [ ] Must-haves confirmed
</success_criteria>
