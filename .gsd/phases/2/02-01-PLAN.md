---
phase: 2
plan: 1
wave: 1
depends_on: []
files_modified:
  - "src/matriculaup/main.py"
  - "src/matriculaup/ui/app_window.py"
  - "src/matriculaup/models/course.py"
  - "src/matriculaup/store/persistence.py"
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Application loads course JSON into Python datastructures without pandas"
  artifacts:
    - "src/matriculaup/main.py"
    - "src/matriculaup/ui/app_window.py"
---

# Plan 2.1: Foundation & Data Layer

<objective>
Sets up the PySide6 application shell and the core data models. Moving away from Pandas for the runtime app to ensure <5s startup times and smaller bundled `.exe`.
</objective>

<context>
Load for context:
- .gsd/SPEC.md
- input/courses_2026-1.json (to understand the structure)
</context>

<tasks>

<task type="auto">
  <name>Create Data Models</name>
  <files>src/matriculaup/models/course.py</files>
  <action>
    Create python dataclasses for `Course`, `Section`, `Session`, and `SessionType` (Enum).
    Implement a `load_from_json(path)` method that reads the pre-extracted `input/courses_2026-1.json` using the standard `json` module.
    AVOID using pandas.
  </action>
  <verify>python -c "from src.matriculaup.models.course import load_from_json; c=load_from_json('input/courses_2026-1.json'); print(len(c))" (should print ~253)</verify>
  <done>Dataclasses map accurately to the courses_2026-1.json schema.</done>
</task>

<task type="auto">
  <name>Create Persistence Manager</name>
  <files>src/matriculaup/store/persistence.py</files>
  <action>
    Build a simple class to save/load the user's selected section codes to `~/.matriculaup/schedule.json`.
    Provide `save_schedule(section_codes: list[str])` and `load_schedule() -> list[str]`.
  </action>
  <verify>Write a basic unit test in a temp file or run a python -c to test save/load cycle.</verify>
  <done>List of strings scales/saves properly to the home directory.</done>
</task>

<task type="auto">
  <name>Main Application Shell</name>
  <files>src/matriculaup/main.py, src/matriculaup/ui/app_window.py</files>
  <action>
    Create the PySide6 `QMainWindow` containing a `QTabWidget` with three empty tabs: "Buscar Cursos", "Generar Horario", "Horarios Guardados".
    The `main.py` entry point should instantiate the Qt Application and load the models.
  </action>
  <verify>python src/matriculaup/main.py launches a window</verify>
  <done>Window opens, contains the tab structure, doesn't crash.</done>
</task>

</tasks>

<verification>
After all tasks, verify:
- [ ] Application starts
- [ ] JSON is successfully mapped into Course/Section objects
</verification>

<success_criteria>
- [ ] All tasks verified
- [ ] Must-haves confirmed
</success_criteria>
